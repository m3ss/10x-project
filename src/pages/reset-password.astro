---
import Layout from "../layouts/Layout.astro";
import { ResetPasswordForm } from "../components/ResetPasswordForm";
import { ThemeToggle } from "../components/ThemeToggle";

// Check if this is password update mode (user clicked link from email)
const url = new URL(Astro.request.url);
const accessToken = url.searchParams.get("access_token");
const type = url.searchParams.get("type");

// Determine mode based on URL parameters
const mode = accessToken && type === "recovery" ? "update" : "request";
const accessTokenValue = accessToken || undefined;
---

<Layout title="Reset hasÅ‚a">
  <ThemeToggle client:load />
  <ResetPasswordForm client:load mode={mode} accessToken={accessTokenValue} />
</Layout>
